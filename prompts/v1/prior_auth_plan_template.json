{
  "plan_name": "Prior-Authorization Intelligence Plan",
  "plan_id_prefix": "pa-plan-",

  "description": "Reusable template for workflows that predict priorâ€‘authorization (PA) approval for a specific drug/patient/insurer trio.",

  "required_parameters": [
    "patient_id",
    "drug_name",
    "insurer_id"
  ],

  "steps": [
    {
      "step_id": "step1_get_patient_record",
      "task_description": "Retrieve patient medical record",
      "agent_capability_required": "get_patient_record",
      "target_agent_type": "PatientDataAgent",
      "inputs": {
        "patient_id": "patient-001"
      },
      "dependencies": [],
      "priority": "high"
    },

    {
      "step_id": "step2_query_guidelines",
      "task_description": "Query clinical guidelines for empagliflozin",
      "agent_capability_required": "query_guidelines",
      "target_agent_type": "GuidelineAgent",
      "inputs": {
        "topic": "Clinical guidelines for empagliflozin treatment"
      },
      "dependencies": [],
      "priority": "high"
    },

    {
      "step_id": "step3_get_policy_for_drug",
      "task_description": "Retrieve insurance policy for empagliflozin",
      "agent_capability_required": "get_policy_for_drug",
      "target_agent_type": "PolicyAnalysisAgent",
      "inputs": {
        "drug_name": "empagliflozin"
      },
      "dependencies": [],
      "priority": "high"
    },

    {
      "step_id": "step4_check_drug_interactions",
      "task_description": "Check potential interactions for empagliflozin with patient's current meds",
      "agent_capability_required": "check_drug_interactions",
      "target_agent_type": "DrugBankAgent",
      "inputs": {
        "drug_names": ["empagliflozin", "metformin"]
      },
      "dependencies": ["step1_get_patient_record"],
      "priority": "medium"
    },

    {
      "step_id": "step5_check_coverage_criteria",
      "task_description": "Evaluate if patient meets PA criteria for empagliflozin",
      "agent_capability_required": "check_coverage_criteria",
      "target_agent_type": "PolicyAnalysisAgent",
      "inputs": {
        "drug_name": "empagliflozin",
        "patient_evidence": {
          "age": 58,
          "diagnoses_icd10": ["E11.9"],
          "medication_history": ["Metformin"],
          "labs": {
            "eGFR": 70
          }
        }
      },
      "dependencies": [
        "step1_get_patient_record",
        "step3_get_policy_for_drug"
      ],
      "priority": "high"
    },

    {
      "step_id": "step6_predict_approval_likelihood",
      "task_description": "Predict likelihood of PA approval",
      "agent_capability_required": "predict_approval_likelihood",
      "target_agent_type": "PatientStratificationAgent",
      "inputs": {
        "patient_id": "patient-001",
        "drug_name": "empagliflozin",
        "insurer_id": "TEST-INS"
      },
      "dependencies": [
        "step1_get_patient_record",
        "step2_query_guidelines",
        "step3_get_policy_for_drug",
        "step4_check_drug_interactions",
        "step5_check_coverage_criteria"
      ],
      "priority": "critical"
    },

    {
      "step_id": "step7_generate_documentation",
      "task_description": "Generate Prior Authorization summary PDF and Letter of Medical Necessity",
      "agent_capability_required": "generate_documentation",
      "target_agent_type": "DocumentationAgent",
      "inputs": {
        "report_data": "$RESULT_FROM_step6_predict_approval_likelihood",
        "original_request": {
          "patient_id": "patient-001",
          "drug_name": "empagliflozin",
          "insurer_id": "TEST-INS",
          "provider_name": "Dr. Smith",
          "provider_npi": "1234567890",
          "diagnosis_codes": ["E11.9"]
        }
      },
      "dependencies": [
        "step6_predict_approval_likelihood"
      ],
      "priority": "high"
    }
  ]
}